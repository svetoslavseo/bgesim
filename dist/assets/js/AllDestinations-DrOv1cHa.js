import{r as m,j as e,H as k}from"./react-vendor-4ojIaEMp.js";import{R as w,C as L}from"./constants-Ct2pKzgS.js";import"./articles-_cSwa24C.js";import{s as P,a as S}from"./utils-CuaJlodt.js";import{u as N,i as p}from"./i18n-CUQnsjz_.js";import"./vendor-B3hKfGQP.js";import"./components-UJEfX2Hl.js";import"./icons-B0Rijjdx.js";import"./country-page-B7zHV9K_.js";import"./data-service-CydxH5Qr.js";import"./plan-components-D5Z3gAVo.js";import"./compatibility-DDqLnYC0.js";const F=(a,t)=>{if(!t||!t.items)return console.log(`getLowestPriceForCountry: No plans data for ${a}`),null;console.log(`getLowestPriceForCountry: Looking for ${a}, total plans: ${t.items.length}`);const l=t.items.filter(n=>(n.covered_countries||[]).includes(a));if(console.log(`getLowestPriceForCountry: Found ${l.length} plans for ${a}`),l.length===0)return null;const c=l.reduce((n,g)=>g.price.amount_with_tax<n.price.amount_with_tax?g:n),i={price:c.price.amount_with_tax/100,currency:c.price.currency};return console.log(`getLowestPriceForCountry: Lowest price for ${a}: $${i.price} ${i.currency}`),i},E=({country:a,navigateTo:t,plansData:l})=>{const{t:c}=N("countries"),i=a.countryCode||a.id.toUpperCase(),n=F(i,l);console.log(`CountryCard: ${a.name} (${i}) - plansData:`,!!l,"lowestPrice:",n);const g=x=>{try{const d=c(`countries.${x}`);return d!==`countries.${x}`?d:a.name}catch(d){return console.error("Translation error:",d),a.name}};return e.jsxs("a",{href:`/${a.regionId}/${a.slug}`,className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-lg hover:border-blue-500 transition-all duration-300 flex items-center block",children:[e.jsx("img",{src:S(i),alt:`${g(a.id)} flag`,className:"w-10 h-auto rounded-md"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g(a.id)}),e.jsx("p",{className:"text-sm text-gray-500",children:c("data_plans_from",{ns:"countries",price:n?`$${n.price.toFixed(2)}`:c("not_available",{ns:"countries"})})})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},M=({navigateTo:a})=>{const{t}=N("countries"),[l,c]=m.useState([]),[i,n]=m.useState(!0),[g,x]=m.useState(null),[d,v]=m.useState(""),[u,f]=m.useState("all"),[j,y]=m.useState(null),$=s=>{const r=t(`regions.${s}`);return r!==`regions.${s}`?r:w.find(o=>o.id===s)?.name||s};m.useEffect(()=>{(async()=>{try{n(!0),c(L)}catch(r){x(t("failed_to_load")),console.error(r)}finally{n(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{console.log("AllDestinations: Loading enhanced plans data...");const r=await P.getNormalizedPlansData();console.log("AllDestinations: Enhanced plans data loaded:",r?.items?.length||0,"plans");const o=r?.items?.filter(b=>b.source==="saily")||[],h=r?.items?.filter(b=>b.source==="local")||[];console.log("AllDestinations: Breakdown -",o.length,"Saily plans,",h.length,"local plans"),y(r)}catch(r){console.error("AllDestinations: Failed to load enhanced plans data:",r),y({items:[]})}})()},[]);const C=(s,r)=>{try{const o=t(`countries.${s}`);return o!==`countries.${s}`?o:r}catch(o){return console.error("Translation error:",o),r}},_=l.filter(s=>{if(u!=="all"&&s.regionId!==u)return!1;if(d.trim()){const r=C(s.id,s.name),o=s.name,h=d.toLowerCase();if(!r.toLowerCase().includes(h)&&!o.toLowerCase().includes(h))return!1}return!0});return e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx("html",{lang:p.language==="bg"?"bg":"en"}),e.jsx("title",{children:t("meta.all_destinations_title",{ns:"countries"})}),e.jsx("meta",{name:"description",content:t("meta.all_destinations_description",{ns:"countries"})}),e.jsx("meta",{name:"keywords",content:t("meta.all_destinations_keywords",{ns:"countries"})}),e.jsx("meta",{property:"og:title",content:t("meta.all_destinations_og_title",{ns:"countries"})}),e.jsx("meta",{property:"og:description",content:t("meta.all_destinations_og_description",{ns:"countries"})}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:"https://travelesim.bg/all-destinations"}),e.jsx("meta",{property:"og:image",content:"https://travelesim.bg/esim-data/travelesim-logo.png"}),e.jsx("meta",{property:"og:locale",content:p.language==="bg"?"bg_BG":"en_US"}),e.jsx("meta",{property:"og:locale:alternate",content:p.language==="bg"?"en_US":"bg_BG"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:t("meta.all_destinations_twitter_title",{ns:"countries"})}),e.jsx("meta",{name:"twitter:description",content:t("meta.all_destinations_twitter_description",{ns:"countries"})}),e.jsx("link",{rel:"canonical",href:`https://travelesim.bg${p.language==="en"?"/en":""}/all-destinations`}),e.jsx("link",{rel:"alternate",hrefLang:"bg",href:"https://travelesim.bg/all-destinations"}),e.jsx("link",{rel:"alternate",hrefLang:"en",href:"https://travelesim.bg/en/all-destinations"}),e.jsx("link",{rel:"alternate",hrefLang:"x-default",href:"https://travelesim.bg/all-destinations"})]}),e.jsxs("div",{className:"bg-white",children:[e.jsx("section",{className:"bg-black py-20",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-extrabold text-white leading-tight mb-6",children:t("all_destinations")}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:t("all_destinations_subtitle")})]})}),e.jsx("section",{className:"py-8 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:t("search_country_placeholder"),value:d,onChange:s=>v(s.target.value),className:"w-full px-6 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx("button",{onClick:()=>f("all"),className:`px-6 py-2 rounded-full font-medium transition-colors ${u==="all"?"bg-black text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:t("all_regions")}),w.map(s=>e.jsx("button",{onClick:()=>f(s.id),className:`px-6 py-2 rounded-full font-medium transition-colors ${u===s.id?"bg-black text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:$(s.id)},s.id))]}),e.jsx("div",{className:"text-center mb-8",children:e.jsx("p",{className:"text-gray-600",children:t("showing_results",{showing:_.length,total:l.length})})}),i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:t("loading_countries")})]}):j?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:_.map((s,r)=>e.jsx(E,{country:s,navigateTo:a,plansData:j},`${s.id}-${r}`))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:t("loading_data")})]})]})})}),e.jsx("section",{className:"bg-blue-50 py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:t("ready_to_stay_connected")}),e.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-2xl mx-auto",children:t("choose_destination_description")}),e.jsx("button",{onClick:()=>a("/"),className:"bg-black text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-gray-800 transition-colors",children:t("browse_popular_destinations")})]})})]})]})};export{M as default};
