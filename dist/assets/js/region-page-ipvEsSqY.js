const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/components-CMngPZgK.js","assets/js/react-vendor-4ojIaEMp.js","assets/js/vendor-B3hKfGQP.js","assets/js/constants-Ct2pKzgS.js","assets/js/icons-D6WOLjW3.js","assets/js/i18n-D5CLTClQ.js","assets/js/country-page-DCGwAzV4.js","assets/js/data-service-CydxH5Qr.js","assets/js/utils-D058XuHK.js","assets/js/plan-components-CroQkvhV.js","assets/js/compatibility-BDfFj75k.js","assets/js/articles-Gp0QO9c5.js"])))=>i.map(i=>d[i]);
import{_ as U}from"./country-page-DCGwAzV4.js";import{r as l,R as le,j as t,H as ce}from"./react-vendor-4ojIaEMp.js";import{R as I,C as de,B as me}from"./constants-Ct2pKzgS.js";import{a as ge,b as ue,c as xe,d as he,e as fe,h as pe,i as ye,B as _e,s as be}from"./utils-D058XuHK.js";import{dataService as ve}from"./data-service-CydxH5Qr.js";import{B as je,H as we}from"./components-CMngPZgK.js";import{P as Ne,R as Se}from"./plan-components-CroQkvhV.js";import{D as $e}from"./compatibility-BDfFj75k.js";import{u as w}from"./i18n-D5CLTClQ.js";const Pe=l.lazy(()=>U(()=>import("./components-CMngPZgK.js").then(n=>n.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Re=l.lazy(()=>U(()=>import("./compatibility-BDfFj75k.js").then(n=>n.a),__vite__mapDeps([10,1,2,5,6,0,3,4,8,11,7,9]))),Ce=l.lazy(()=>U(()=>import("./components-CMngPZgK.js").then(n=>n.m),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),F=()=>t.jsxs("div",{className:"animate-pulse p-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),B=n=>n==="USD"?"$":n,Fe=({regionId:n,navigateTo:f=()=>{}})=>{const{t:d,i18n:s}=w(["common","countries","home","regions"]),{t:o}=w("countries"),{t:c}=w("regions"),{t:_}=w("common"),[h,H]=l.useState(null),[V,W]=l.useState(!1),[b,R]=l.useState(null),[J,q]=l.useState(!0),[K,C]=l.useState(!1),[N,Q]=l.useState(!1);l.useEffect(()=>{Q(!0)},[]);const p=I.find(e=>e.id===n),k=l.useMemo(()=>de.filter(e=>e.regionId===n),[n]),i=p?(e=>{try{const a=o(`regions.${e}`);return a!==`regions.${e}`?a:I.find(r=>r.id===e)?.name||e}catch(a){return console.error("Translation error:",a),I.find(r=>r.id===e)?.name||e}})(p.id):n;l.useEffect(()=>{typeof window<"u"&&(async()=>{try{console.log("RegionPage: Loading enhanced plans data...");const a=await be.getNormalizedPlansData(),r=a?.items?.filter(m=>m.source==="saily")||[],g=a?.items?.filter(m=>m.source==="local")||[];console.log("RegionPage: Enhanced plans loaded:",a?.items?.length||0,"total plans"),console.log("RegionPage: Breakdown -",r.length,"Saily plans,",g.length,"local plans"),R(a)}catch(a){console.error("RegionPage: Error loading enhanced data:",a);try{const r=await ve.getPlansData(!0);console.log("RegionPage: Using fallback plans data:",r?.items?.length||0,"plans"),R(r)}catch(r){console.error("RegionPage: Fallback also failed:",r),R({items:[]})}}finally{q(!1)}})()},[]);const v=typeof window>"u"||!window.document||!window.document.createElement,X=!v&&J&&N,L={items:[{identifier:"region_3gb_30days",name:"3 GB Plan",data_limit:{amount:3,unit:"GB",is_unlimited:!1},duration:{amount:30,unit:"day"},price:{amount_with_tax:999,currency:"USD",identifier:"region_3gb_30days"},covered_countries:[]},{identifier:"region_5gb_30days",name:"5 GB Plan",data_limit:{amount:5,unit:"GB",is_unlimited:!1},duration:{amount:30,unit:"day"},price:{amount_with_tax:1499,currency:"USD",identifier:"region_5gb_30days"},covered_countries:[]},{identifier:"region_10gb_30days",name:"10 GB Plan",data_limit:{amount:10,unit:"GB",is_unlimited:!1},duration:{amount:30,unit:"day"},price:{amount_with_tax:2499,currency:"USD",identifier:"region_10gb_30days"},covered_countries:[]}]},M=v||!b||!N?L:b,G=k.map(e=>e.id.toUpperCase()),j={europe:"EU",asia:"ASA","north-america":"NAM","south-america":"LAT",africa:"AFR",oceania:"ASA"}[n],S=l.useMemo(()=>(M?.items||[]).filter(e=>{const a=Array.isArray(e.covered_countries)?e.covered_countries:[],r=a.length,g=a.filter(m=>G.includes(m)).length;return r<=1||r>=50||g<2?!1:(j&&e.region===j,!0)}),[M,G,j]);console.log("RegionPage: Filtering plans for region:",n),console.log("RegionPage: Total plans in data:",M?.items?.length||0),console.log("RegionPage: Filtered region plans:",S.length);const Y=S.filter(e=>e.region===j),Z=S.filter(e=>e.region!==j);console.log("RegionPage: Explicit regional plans:",Y.length,"Country plans in region:",Z.length);const D={};S.forEach(e=>{const a=Array.isArray(e.covered_countries)?e.covered_countries.length:0;if(a<=1||a>=50)return;const g=`regional|${e.region||"multi"}|${e.data_amount}-${e.data_unit}-${e.validity_days}|${e.price?.amount_with_tax}`,m=D[g];(!m||(e.price?.amount_with_tax??1/0)<(m.price?.amount_with_tax??1/0))&&(D[g]=e)});const z=Object.values(D),x=z.length>0?z.map(e=>{let a="country";return Array.isArray(e.covered_countries)&&e.covered_countries.length>=50?a="global":Array.isArray(e.covered_countries)&&e.covered_countries.length>1?a="regional":a="country",{id:e.identifier,name:e.name,data_amount:e.data_amount,data_unit:e.data_unit,validity_days:e.validity_days,price:{amount_with_tax:e.price.amount_with_tax,currency:e.price.currency},covered_countries:e.covered_countries,identifier:e.identifier,data:e.data,validity:e.validity,planType:a,region:e.region}}):v?L.items.map(e=>{let a="country";return e.region==="GLB"||e.covered_countries.length>=50?a="global":e.region||e.covered_countries.length>5?a="regional":a="country",{id:e.identifier,name:e.name,data_amount:e.data_amount,data_unit:e.data_unit,validity_days:e.validity_days,price:{amount_with_tax:e.price.amount_with_tax,currency:e.price.currency},covered_countries:e.covered_countries,identifier:e.identifier,data:e.data,validity:e.validity,planType:a,region:e.region}}):[],O=x.find(e=>e.isBestValue),ee=O?O.id.toString():void 0,E=x.length>0?x.reduce((e,a)=>a.price.amount_with_tax<e.price.amount_with_tax?a:e,x[0]):null,$=E?`${B(E.price.currency)}${E.price.amount_with_tax/100}`:null,T=le.useMemo(()=>{if(!b?.items)return new Map;const e=new Map;try{b.items.forEach(a=>{const r=a.covered_countries||[],g=a.price.amount_with_tax;r.forEach(m=>{const y=m.toUpperCase(),P=e.get(y);(!P||g<P.amount)&&e.set(y,{amount:g,currency:a.price.currency})})})}catch(a){console.error("Error creating country prices map:",a)}return e},[b]),te=l.useMemo(()=>{const e=i,a=`${me}${s.language==="en"?"/en":""}/${n}`,r=`${a}/#region`,g=`${a}/#breadcrumb`,m=`${a}/#product`,y=x.map(u=>u.price.amount_with_tax/100).filter(u=>Number.isFinite(u)),P=y.length?Math.min(...y).toFixed(2):void 0,oe=y.length?Math.max(...y).toFixed(2):void 0,A=x.slice(0,20).map(u=>({"@type":"Offer","@id":`${a}/#offer-${u.id}`,sku:u.id,name:u.name,price:(u.price.amount_with_tax/100).toFixed(2),priceCurrency:u.price.currency||"USD",availability:"https://schema.org/InStock",eligibleRegion:{"@id":r},itemOffered:{"@id":m},url:`${a}#plans`}));return{"@context":"https://schema.org","@graph":[ge(d,s.language),ue(d,s.language),xe(d,s.language,a,c("meta.title_template",{region:e})||`${e} eSIM - Travel eSIMple`,c("meta.description_template",{region:e})||`Get affordable eSIM data plans for ${e}. Instant activation, no hidden fees.`,r,g),he(d,s.language,a,[{name:d("breadcrumbs.home",{ns:"common"}),item:`${_e}/`},{name:`${e} eSIM`,item:a}]),fe(d,s.language,a,e,"Place"),pe(d,s.language,a,`${e} eSIM`,c("meta.og_description_template",{region:e})||`Get affordable eSIM data plans for ${e}. Instant activation, no hidden fees.`,A),ye(d,s.language,a,x[0]?.price?.currency||"USD",P||"0",oe||"0",A.length,A.map(u=>u["@id"]))]}},[n,i,x,s.language,c,d]),ae=[$?o("data_plans_from",{price:$}):o("affordable_flexible_plans"),o("stay_connected_networks",{region:i}),o("compatible_smartphones")],ne=[{label:o("region_travel_esim",{region:i}),url:s.language==="zh"?`/zh/${n}`:`/${n}`}];if(X)return t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})});if(!p)return t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-center",children:"404 - Region Not Found"}),t.jsx("p",{className:"text-center text-gray-600",children:"The region you are looking for does not exist."})]});const ie=e=>{if(!T.size)return null;try{const a=e.countryCode||e.id.toUpperCase();return T.get(a)}catch(a){return console.error(`Error getting price for country ${e.name}:`,a),null}},re=e=>{const a=ie(e);return a?`${B(a.currency)}${a.amount/100}`:null},se=()=>{if(typeof window<"u"&&typeof window.gtag=="function"&&window.gtag("event","buy_esim_click",{region:p.name,plan:h?.id,upsell:V}),h){const e={country:p.name,flag:"/esim-data/flags/globe.svg",data:h.data,validity:h.validity,price:h.price.amount_with_tax/100,currency:B(h.price.currency||"USD"),identifier:h.identifier,priceIdentifier:h.price?.identifier},a=encodeURIComponent(JSON.stringify(e));f(`/checkout?plan=${a}`)}};return t.jsxs("div",{children:[t.jsxs(ce,{children:[t.jsx("html",{lang:s.language==="bg"?"bg":"en"}),t.jsx("title",{children:c("meta.title_template",{region:i})||`${i} eSIM - Travel eSIMple`}),t.jsx("meta",{name:"description",content:c("meta.description_template",{region:i})||`Get affordable eSIM data plans for ${i}. Instant activation, no hidden fees. Stay connected while traveling in ${i}.`}),t.jsx("meta",{name:"keywords",content:c("meta.keywords_template",{region:i})||`${i} eSIM, ${i} travel eSIM, ${i} mobile data, ${i} international roaming`}),t.jsx("meta",{property:"og:title",content:c("meta.og_title_template",{region:i})||`${i} eSIM - Instant Activation, No Roaming Fees`}),t.jsx("meta",{property:"og:description",content:c("meta.og_description_template",{region:i})||`Get affordable eSIM data plans for ${i}. Instant activation, no hidden fees.`}),t.jsx("meta",{property:"og:type",content:"website"}),t.jsx("meta",{property:"og:url",content:`https://travelesim.bg${s.language==="en"?"/en":""}/${n}`}),t.jsx("meta",{property:"og:image",content:"https://travelesim.bg/esim-data/travelesim-logo.png"}),t.jsx("meta",{property:"og:locale",content:s.language==="bg"?"bg_BG":"en_US"}),t.jsx("meta",{property:"og:locale:alternate",content:s.language==="bg"?"en_US":"bg_BG"}),t.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),t.jsx("meta",{name:"twitter:title",content:c("meta.twitter_title_template",{region:i})||`${i} eSIM - Instant Activation, No Roaming Fees`}),t.jsx("meta",{name:"twitter:description",content:c("meta.twitter_description_template",{region:i})||`Get affordable eSIM data plans for ${i}. Instant activation, no hidden fees.`}),t.jsx("link",{rel:"canonical",href:`https://travelesim.bg${s.language==="en"?"/en":""}/${n}`}),t.jsx("link",{rel:"alternate",hrefLang:"bg",href:`https://travelesim.bg/${n}`}),t.jsx("link",{rel:"alternate",hrefLang:"en",href:`https://travelesim.bg/en/${n}`}),t.jsx("link",{rel:"alternate",hrefLang:"x-default",href:`https://travelesim.bg/${n}`}),N&&!v&&t.jsx("script",{type:"application/ld+json",children:JSON.stringify(te)})]}),t.jsxs("div",{className:"bg-white",children:[t.jsx(je,{items:ne,navigateTo:f}),t.jsx("div",{className:"w-full bg-black text-white py-8 md:py-16",children:t.jsx("div",{className:"w-full max-w-[90vw] mx-auto px-2 sm:px-4",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 lg:gap-16 items-center justify-center",children:[t.jsxs("div",{className:"lg:col-span-1 flex flex-col justify-center text-left px-2 sm:px-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start mb-6 gap-3 sm:gap-4 w-full",children:[t.jsx("span",{className:"inline-flex items-center justify-center",style:{width:56,height:56,borderRadius:"50%",overflow:"hidden",boxShadow:"0 0 0 4px rgba(100,100,150,0.5), 0 0 0 8px #23225a",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl font-bold text-white",children:p.name.charAt(0)})})}),t.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold text-white text-left",children:o("esim_for_region",{region:i})})]}),t.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 mb-6 sm:mb-8 text-left",children:o("stay_connected_region",{region:i})}),t.jsx("ul",{className:"space-y-2 mb-6 sm:mb-8 text-white text-left",children:ae.map((e,a)=>t.jsx(Me,{text:e},a))})]}),t.jsx("div",{className:"lg:col-span-1 flex flex-col justify-center",children:t.jsx("div",{className:"w-full rounded-none shadow-none p-0 m-0 border-0 sm:rounded-2xl sm:shadow-lg sm:p-8 flex flex-col justify-center items-center lg:sticky lg:top-24",style:{boxSizing:"border-box"},children:t.jsx(Ne,{plans:x,selectedPlan:h,onSelectPlan:e=>H(e),countryName:i,bestValuePlanId:ee,onUpsellChange:W,onBuyNow:se,onCheckCompatibility:()=>C(!0)})})})]})})}),t.jsx(Se,{plans:x,regionName:i}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:t.jsx(l.Suspense,{fallback:t.jsxs("div",{className:"animate-pulse p-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),children:t.jsx(Ce,{regionName:p?.name||i,title:`All Available Plans for ${i}`,maxPlans:12,showSource:!0,className:"mb-8"})})}),t.jsx("div",{className:"bg-gray-50 py-16 md:py-24",children:t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-16",children:[t.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:c("countries_section.title",{region:i})}),t.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:c("countries_section.description")})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8",children:k.map(e=>t.jsx(ke,{country:e,navigateTo:f,price:re(e)||void 0},e.id))}),t.jsx("div",{className:"mt-16 pt-12 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:k.length}),t.jsx("div",{className:"text-gray-600 font-medium",children:o("countries_available")})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:$?o("from_price",{price:$}):o("from_default_price")}),t.jsx("div",{className:"text-gray-600 font-medium",children:o("starting_price")})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"24/7"}),t.jsx("div",{className:"text-gray-600 font-medium",children:o("customer_support")})]})]})})]})})}),t.jsx(we,{regionName:i}),t.jsx(l.Suspense,{fallback:t.jsx(F,{}),children:t.jsx(Re,{onCheckCompatibility:()=>C(!0)})}),t.jsx($e,{isOpen:K,onClose:()=>C(!1)}),t.jsx(l.Suspense,{fallback:t.jsx(F,{}),children:t.jsx(Pe,{navigateTo:f})})]})]},`region-${n}-${v?"ssr":N?"hydrated":"client"}`)},ke=({country:n,price:f})=>{const{t:d}=w("countries"),s=c=>{try{const _=d(`countries.${c}`,{ns:"countries"});return _!==`countries.${c}`?_:n.name}catch(_){return console.error("Translation error:",_),n.name}},o=f!=null;return t.jsx("a",{href:`/${n.regionId}/${n.slug}`,className:`group bg-white p-6 rounded-xl shadow-sm border border-gray-100 cursor-pointer hover:shadow-lg hover:border-blue-200 transition-all duration-300 transform hover:-translate-y-1 block ${o?"":"opacity-60"}`,children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden shadow-sm border border-gray-200 group-hover:shadow-md transition-shadow duration-300",children:t.jsx("img",{src:`/esim-data/flags/${n.id.toLowerCase()}.svg`,alt:`${s(n.id)} flag`,className:"w-full h-full object-cover",loading:"lazy",width:"48",height:"48"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 truncate",children:s(n.id)}),t.jsx("p",{className:"text-sm text-gray-600 font-medium",children:o?f:d("no_plans_available")}),t.jsx("div",{className:"flex items-center mt-2",children:t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${o?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:d(o?"available":"unavailable")})})]}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Me=({text:n})=>t.jsxs("li",{className:"flex items-center text-lg text-white",children:[t.jsx("svg",{className:"w-6 h-6 text-green-500 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),n]});export{Fe as R};
