import{jsx as t,jsxs as i}from"react/jsx-runtime";import{useState as b,useEffect as S}from"react";import{MdCheck as O,MdInfo as H,MdStar as ee}from"react-icons/md";import{P as te}from"./components-0JP6n3jk.js";import{useTranslation as T}from"react-i18next";import{FaBolt as q,FaWifi as J,FaRocket as W,FaGlobe as K}from"react-icons/fa";import{C as re}from"./constants-Ct2pKzgS.js";const k=r=>r==="USD"?"$":r,u=r=>typeof r.price=="number"?r.price:r.price&&typeof r.price=="object"&&typeof r.price.amount_with_tax=="number"?r.price.amount_with_tax/100:NaN,C=r=>r.currency?r.currency:r.price&&typeof r.price=="object"&&r.price.currency?r.price.currency:"USD",se=r=>{if(r.data==="Unlimited"||!r.data)return u(r);const l=r.data.match(/(\d+(?:\.\d+)?)/);if(!l)return u(r);const o=parseFloat(l[1]);return o===0?u(r):u(r)/o},G=r=>{const l=u(r);return isNaN(l)?"0.00":l.toFixed(2)},ne=r=>{const l=se(r);return isNaN(l)?"0.00":l.toFixed(2)},ie=r=>{if(Array.isArray(r?.covered_countries)){const l=r.covered_countries.length;if(l>50)return"global";if(l>1)return"regional";if(l===1)return"country"}return typeof r?.planType=="string"?r.planType:typeof r?.region=="string"&&r.region.toLowerCase()==="global"?"global":"country"},xe=({plans:r,selectedPlan:l,onSelectPlan:o,countryName:f="Andorra",bestValuePlanId:c,onUpsellChange:N,onBuyNow:p,onCheckCompatibility:x})=>{const{t:s}=T(["countries","plans"]),{i18n:m}=T(),[v,_]=b(!1),[n,a]=b(null);S(()=>{console.log("PlanSelector: Received plans:",r?.length||0,"for country:",f),r?.length>0&&console.log("PlanSelector: First plan:",r[0])},[r,f]);const P=e=>e?e==="Unlimited"?s("unlimited_data"):e:"",j=e=>{if(!e)return"";if(m.language==="bg"){if(e.includes("7 days"))return"7 дни";if(e.includes("15 days"))return"15 дни";if(e.includes("30 days"))return"30 дни";if(e.includes("1 day"))return"1 ден";if(e.includes("days"))return e.replace("days","дни");if(e.includes("day"))return e.replace("day","ден")}return e},D=e=>{switch(e){case"global":return"Global plans work in 50+ countries worldwide";case"regional":return"Regional plans work in multiple countries within a specific region";case"country":return"Country plans work specifically in this destination";default:return"Plan coverage information"}};if(!r||r.length===0)return t("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-gray-100 w-full mx-auto text-center",children:t("p",{className:"text-gray-700 text-lg",children:s("no_plans_available")})});const y=e=>`${e.validity.split(" ")[0]} ${s("days")}`,R=Array.from(new Set(r.map(y))).sort((e,d)=>{const g=parseInt(e.split(" ")[0]),A=parseInt(d.split(" ")[0]);return g-A}),I=r.reduce((e,d)=>{const g=y(d);return e[g]=(e[g]||0)+1,e},{}),[w,Q]=b(R[0]),$=r.filter(e=>y(e)===w),M=[...$].sort((e,d)=>u(e)-u(d)),[B,X]=b(!1),Y=B?M:M.slice(0,4),F=[...$].sort((e,d)=>u(d)-u(e)),Z=F.length>=3?F[2].id:null;return i("div",{id:"choose-your-plan",className:"bg-white p-4 sm:p-8 rounded-3xl shadow-2xl border border-gray-100 w-full max-w-[95vw] mx-auto px-2 sm:px-4",children:[i("div",{className:"relative mb-6 sm:mb-8 pt-8 sm:pt-8",children:[i("div",{className:"text-center",children:[t("h2",{className:"text-xl sm:text-3xl font-bold text-gray-900 mb-2",children:s("choose_your_plan")}),t("p",{className:"text-gray-600 text-sm sm:text-lg mb-4",children:m.language==="bg"?"Изберете походящ план с мобилни данни за вашето пътуване":"Select the perfect data plan for your journey"})]}),i("div",{className:"absolute -top-2 -right-2 sm:-top-4 sm:-right-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-3 sm:px-5 py-1.5 sm:py-2.5 rounded-full text-xs sm:text-sm font-bold flex items-center space-x-1.5 sm:space-x-2 shadow-lg transform hover:scale-105 transition-transform",children:[t("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-white rounded-full animate-pulse"}),t("span",{children:s("instant_activation")||"Instant Activation"})]})]}),t("div",{className:"flex space-x-3 mb-6 sm:mb-8 overflow-x-auto scrollbar-hide pb-2",children:R.map(e=>i("button",{"aria-pressed":w===e,className:`flex-shrink-0 flex flex-col items-center gap-1.5 px-4 py-3 rounded-xl border-2 font-bold text-sm transition-all duration-200 ${w===e?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-blue-700 shadow-lg":"bg-white text-gray-800 border-gray-400 hover:border-blue-400 hover:bg-blue-50"}`,onClick:()=>Q(e),children:[t("span",{className:"text-base font-bold",children:e}),i("div",{className:"flex items-center gap-1",children:[t("span",{className:`${w===e?"bg-white/20 text-white":"bg-blue-100 text-blue-600"} text-xs font-bold px-1.5 py-0.5 rounded-full`,children:I[e]||0}),t("span",{className:`text-xs font-medium ${w===e?"text-white/80":"text-gray-500"}`,children:(I[e]||0)===1?s("plan"):s("plans")})]})]},e))}),t("div",{className:"space-y-3 sm:space-y-4 mb-8",children:Y.map(e=>{const d=l&&l.id===e.id,g=String(e.identifier??e.id)===String(c),A=e.id===Z;return i("div",{onClick:()=>{console.log("DEBUG: Plan clicked in PlanSelector:",e),console.log("DEBUG: plan.price:",e.price),console.log("DEBUG: plan.price.identifier:",e.price?.identifier),o(e)},className:`relative flex items-center p-4 sm:p-6 border-2 rounded-2xl cursor-pointer transition-all duration-300 hover:shadow-lg ${d?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 shadow-lg ring-4 ring-blue-200":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"} ${g?"ring-2 ring-yellow-400":""}`,style:{minHeight:"56px"},children:[t("div",{className:`flex items-center justify-center w-5 h-5 sm:w-6 sm:h-6 border-2 rounded-full mr-3 sm:mr-4 flex-shrink-0 transition-all duration-200 ${d?"border-blue-600 bg-blue-600":"border-gray-300"}`,children:d&&t(O,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),i("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-6 mb-1 sm:mb-0",children:i("div",{children:[t("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-1",children:t("span",{className:"font-bold text-lg sm:text-2xl text-gray-900",children:P(e.data)})}),i("span",{className:"block sm:inline sm:ml-2 text-gray-600 text-xs sm:text-sm font-medium",children:[j(e.validity)," ",s("validity")]})]})}),t("div",{className:"text-right",children:i("div",{className:"flex flex-col items-end space-y-0.5 sm:space-y-1",children:[i("span",{className:"font-bold text-xl sm:text-3xl text-blue-600",children:[k(C(e)),G(e)]}),i("div",{className:"flex items-center gap-2 justify-end",children:[(()=>{const h=ie(e);return i("div",{className:"mt-2",children:[i("span",{className:`inline-flex items-center gap-1 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium ${h==="global"?"bg-purple-100 text-purple-700":h==="regional"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:[s(h==="global"?"global":h==="regional"?"regional":"country"),t(H,{className:"w-4 h-4 cursor-help",onMouseEnter:()=>a(`${h}-${e.id}`),onMouseLeave:()=>a(null)})]}),n===`${h}-${e.id}`&&i("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-lg whitespace-nowrap z-10",children:[D(h),t("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})})(),e.data==="Unlimited"?t("span",{className:"bg-yellow-100 text-black px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium",children:s("unlimited_data")}):i("span",{className:"bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium",children:[k(C(e)),ne(e),"/GB"]})]})]})})]}),A&&!g&&i("div",{className:"absolute -top-2 sm:-top-3 -right-2 sm:-right-3 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black text-xs sm:text-sm font-bold px-3 sm:px-4 py-1 sm:py-2 rounded-full flex items-center gap-1 sm:gap-2 shadow-lg",children:[t(ee,{className:"w-3 h-3 sm:w-4 sm:h-4 text-black"}),t("span",{className:"hidden sm:inline",children:s("plans:pricing.most_popular")}),t("span",{className:"sm:hidden",children:s("plans:pricing.most_popular")})]})]},e.id)})}),$.length>4&&t("div",{className:"flex justify-center mb-8",children:t("button",{className:"text-blue-600 font-bold px-6 py-3 rounded-xl border-2 border-blue-200 hover:bg-blue-50 transition-all duration-200",onClick:()=>X(e=>!e),children:B?s("show_less_plans"):s("view_all_plans",{count:$.length})})}),l&&l.id?t("button",{className:"w-full font-bold py-4 sm:py-5 px-6 sm:px-8 rounded-2xl text-base sm:text-lg mb-6 transition-all duration-200 bg-gradient-to-r from-gray-900 to-black text-white hover:from-black hover:to-gray-800 shadow-lg hover:shadow-xl transform hover:scale-105",onClick:()=>{if(p){const e={...l,identifier:l?.identifier,priceIdentifier:l?.price?.identifier};p(e)}},children:m.language==="bg"?`${s("continue")} - ${k(C(l))}${G(l)}`:`${s("buy_now")} - ${k(C(l))}${G(l)}`}):t("button",{className:"w-full font-bold py-4 sm:py-5 px-6 sm:px-8 rounded-2xl text-base sm:text-lg mb-6 transition-all bg-gray-200 text-gray-500 cursor-not-allowed",disabled:!0,children:s("select_a_plan")}),t("div",{className:"text-center mb-8",children:t("a",{href:"#",className:"text-blue-600 hover:text-blue-700 text-sm sm:text-base font-semibold underline decoration-dotted underline-offset-4 hover:decoration-solid transition-all",onClick:e=>{e.preventDefault(),x&&x()},children:s("check_phone_compatibility")})}),t("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-2xl p-4 sm:p-6 mb-6",children:i("div",{className:"flex flex-col sm:flex-row items-center justify-center text-xs sm:text-sm text-gray-700 gap-4 sm:gap-6",children:[t("div",{className:"flex items-center justify-center",children:t("img",{src:"/esim-data/saily-trustpilot-rating.png",alt:"Trustpilot Rating",className:"h-6 sm:h-8"})}),i("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[t(O,{className:"text-green-500 w-4 h-4 sm:w-5 sm:h-5"}),t("span",{className:"font-medium text-xs sm:text-sm",children:s("secure_payment_guaranteed")})]})]})}),t("div",{className:"flex justify-center",children:t(te,{})})]})},V=r=>r==="USD"?"$":r,U=8,ge=({plans:r,regionName:l})=>{const[o,f]=b(!1),{t:c,i18n:N}=T("plans"),p=o?r:r.slice(0,U),x=s=>{if(!s)return"";if(N.language==="bg"){if(s.includes("7 days"))return"7 дни";if(s.includes("15 days"))return"15 дни";if(s.includes("30 days"))return"30 дни";if(s.includes("1 day"))return"1 ден";if(s.includes("days"))return s.replace("days","дни");if(s.includes("day"))return s.replace("day","ден")}return s};return t("section",{className:"my-16",children:i("div",{className:"px-6 md:px-16 py-8",children:[t("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-2",children:c("title",{country:l||"this region"})}),t("p",{className:"text-center text-gray-600 mb-8",children:c("description")}),i("div",{className:"flex justify-center gap-6 mb-8",children:[i("span",{className:"flex items-center gap-1 text-blue-600 text-sm font-medium",children:[t(q,{className:"inline"}),c("features.instant_activation")]}),i("span",{className:"flex items-center gap-1 text-blue-600 text-sm font-medium",children:[t(J,{className:"inline"}),c("features.wifi_hotspot")]}),i("span",{className:"flex items-center gap-1 text-blue-600 text-sm font-medium",children:[t(W,{className:"inline"}),c("features.fast_internet")]})]}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:p.map(s=>i("div",{className:"bg-blue-50 rounded-2xl p-8 flex flex-col items-center shadow-sm transition hover:shadow-md",children:[t("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:t(K,{className:"text-blue-400 text-3xl"})}),t("div",{className:"text-3xl font-extrabold text-blue-900 mb-1",children:s.data}),t("div",{className:"text-gray-500 font-medium mb-4",children:c("for_duration",{duration:x(s.validity)})}),i("a",{href:"#",className:"text-blue-600 font-semibold hover:underline mt-auto text-base",onClick:m=>{m.preventDefault();const v={country:l||"this region",flag:"/esim-data/flags/globe.svg",data:s.data,validity:s.validity,price:s.price.amount_with_tax/100,currency:V(s.price.currency),identifier:s.identifier,priceIdentifier:s.price?.identifier},_=encodeURIComponent(JSON.stringify(v));window.location.href=`/checkout?plan=${_}`},children:[c("buy_for_price",{currency:V(s.price.currency),price:(s.price.amount_with_tax/100).toFixed(2)})," →"]})]},s.id))}),r.length>U&&t("div",{className:"flex justify-center mt-10",children:t("a",{href:"#",className:"px-8 py-3 rounded-xl bg-white text-blue-700 font-semibold border border-blue-200 hover:bg-blue-50 transition text-lg shadow inline-block",onClick:s=>{s.preventDefault(),f(m=>!m)},children:o?c("show_less"):c("show_more_plans",{count:r.length-U})})})]})})},z=r=>r==="USD"?"$":r,E=8,le=({plans:r,countryName:l})=>{const{t:o,i18n:f}=T("plans"),[c,N]=b(!1),[p,x]=b(null),s=c?r:r.slice(0,E),m=n=>{if(!n)return"";if(f.language==="bg"){if(n.includes("7 days"))return"7 дни";if(n.includes("15 days"))return"15 дни";if(n.includes("30 days"))return"30 дни";if(n.includes("1 day"))return"1 ден";if(n.includes("days"))return n.replace("days","дни");if(n.includes("day"))return n.replace("day","ден")}return n},v=n=>{if(Array.isArray(n?.covered_countries)){const a=n.covered_countries.length;if(a>50)return"global";if(a>1)return"regional";if(a===1)return"country"}return typeof n?.planType=="string"?n.planType:typeof n?.region=="string"&&n.region.toLowerCase()==="global"?"global":"country"},_=n=>{switch(n){case"global":return"Global plans work in 50+ countries worldwide";case"regional":return"Regional plans work in multiple countries within a specific region";case"country":return"Country plans work specifically in this destination";default:return"Plan coverage information"}};return t("section",{className:"my-16",children:i("div",{className:"px-6 md:px-16 py-8",children:[t("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-2",children:o("title",{country:l||"this country"})}),t("p",{className:"text-center text-gray-600 mb-8",children:o("description")}),i("div",{className:"flex justify-center gap-6 mb-8",children:[i("span",{className:"flex items-center gap-1 text-blue-600 text-sm font-medium",children:[t(q,{className:"inline"}),o("features.instant_activation")]}),i("span",{className:"flex items-center gap-1 text-blue-600 text-sm font-medium",children:[t(J,{className:"inline"}),o("features.wifi_hotspot")]}),i("span",{className:"flex items-center gap-1 text-blue-600 text-sm font-medium",children:[t(W,{className:"inline"}),o("features.fast_internet")]})]}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(n=>i("div",{className:"bg-blue-50 rounded-2xl p-8 flex flex-col items-center shadow-sm transition hover:shadow-md",children:[t("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:t(K,{className:"text-blue-400 text-3xl"})}),t("div",{className:"text-3xl font-extrabold text-blue-900 mb-1",children:n.data}),i("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t("div",{className:"text-gray-500 font-medium",children:o("for_duration",{duration:m(n.validity)})}),(()=>{const a=v(n);return i("div",{className:"relative",children:[i("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${a==="global"?"bg-purple-100 text-purple-700":a==="regional"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:[o(a==="global"?"global":a==="regional"?"regional":"country"),t(H,{className:"w-3 h-3 cursor-help",onMouseEnter:()=>x(`${a}-${n.id}`),onMouseLeave:()=>x(null)})]}),p===`${a}-${n.id}`&&i("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-lg whitespace-nowrap z-10",children:[_(a),t("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})})()]}),i("a",{href:"#",className:"text-blue-600 font-semibold hover:underline mt-auto text-base mb-2",onClick:a=>{a.preventDefault();const P=re.find(L=>L.name===l),j=(P?.countryCode||P?.id||"globe").toLowerCase(),D={country:l||"this country",flag:`/esim-data/flags/${j.toLowerCase()}.svg`,data:n.data,validity:n.validity,price:n.price.amount_with_tax/100,currency:z(n.price.currency),identifier:n.identifier,priceIdentifier:n.price?.identifier},y=encodeURIComponent(JSON.stringify(D));window.location.href=`/checkout?plan=${y}`},children:[o("buy_for_price",{currency:z(n.price.currency),price:(n.price.amount_with_tax/100).toFixed(2)})," →"]})]},n.id))}),r.length>E&&t("div",{className:"flex justify-center mt-10",children:t("a",{href:"#",className:"px-8 py-3 rounded-xl bg-white text-blue-700 font-semibold border border-blue-200 hover:bg-blue-50 transition text-lg shadow inline-block",onClick:n=>{n.preventDefault(),N(a=>!a)},children:c?o("show_less"):o("show_more_plans",{count:r.length-E})})})]})})},he=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{he as C,xe as P,ge as R};
