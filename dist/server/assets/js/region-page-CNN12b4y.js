import{jsxs as i,jsx as t}from"react/jsx-runtime";import ue,{lazy as z,useState as b,useEffect as W,useMemo as j,Suspense as E}from"react";import{R as G,C as he,B as fe}from"./constants-Ct2pKzgS.js";import{c as pe,d as xe,e as ye,h as be,i as _e,j as ve,k as we,B as Ne,b as Se}from"./utils-vRJ5uFnM.js";import{useTranslation as _}from"react-i18next";import{H as $e}from"./react-vendor-DuXzSgbK.js";import{dataService as Pe}from"./data-service-CydxH5Qr.js";import{B as Ce,H as Re}from"./components-0JP6n3jk.js";import{FaRegCompass as ke}from"react-icons/fa";import{P as Me,R as Be}from"./plan-components-D0_vZHhI.js";import{D as De}from"./compatibility-DZ9RMvVY.js";const q=({navigateTo:n})=>{const{t:m}=_("common");return i("section",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4","data-page-404":"true",children:[t(ke,{className:"text-brand-accent w-16 h-16 mb-6","aria-hidden":"true"}),t("h1",{className:"text-6xl font-extrabold text-gray-800 mb-4",children:"404"}),t("p",{className:"text-xl text-gray-600 mb-8 max-w-lg",children:m("not_found.message")}),i("div",{className:"flex flex-col sm:flex-row gap-4",children:[t("button",{onClick:()=>n("/"),className:"inline-flex items-center justify-center px-6 py-3 bg-black text-white rounded-md shadow hover:bg-gray-900 transition-colors",children:m("not_found.go_home")}),t("button",{onClick:()=>n("/all-destinations"),className:"inline-flex items-center justify-center px-6 py-3 border border-brand-accent text-brand-accent rounded-md hover:bg-brand-accent/10 transition-colors",children:m("not_found.explore_destinations")})]})]})},Xe=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"})),Ae=z(()=>import("./components-0JP6n3jk.js").then(n=>n.i)),Ie=z(()=>import("./compatibility-DZ9RMvVY.js").then(n=>n.a)),Ue=z(()=>import("./components-0JP6n3jk.js").then(n=>n.m)),J=()=>i("div",{className:"animate-pulse p-4",children:[t("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),t("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),L=n=>n==="USD"?"$":n,Ye=({regionId:n,navigateTo:m=()=>{}})=>{const{t:d,i18n:l}=_(["common","countries","home","regions"]),{t:s}=_("countries"),{t:c}=_("regions"),{t:v}=_("common"),[p,K]=b(null),[Q,X]=b(!1),[w,k]=b(null),[Y,Z]=b(!0),[ee,M]=b(!1),[$,te]=b(!1);W(()=>{te(!0)},[]);const x=G.find(e=>e.id===n),B=j(()=>he.filter(e=>e.regionId===n),[n]);if(!x)return console.error("Region not found:",n),t(q,{navigateTo:m});const r=x?(e=>{try{const a=s(`regions.${e}`);return a!==`regions.${e}`?a:G.find(o=>o.id===e)?.name||e}catch(a){return console.error("Translation error:",a),G.find(o=>o.id===e)?.name||e}})(x.id):n;W(()=>{typeof window<"u"&&(async()=>{try{console.log("RegionPage: Loading enhanced plans data...");const a=await Se.getNormalizedPlansData(),o=a?.items?.filter(g=>g.source==="saily")||[],u=a?.items?.filter(g=>g.source==="local")||[];console.log("RegionPage: Enhanced plans loaded:",a?.items?.length||0,"total plans"),console.log("RegionPage: Breakdown -",o.length,"Saily plans,",u.length,"local plans"),k(a)}catch(a){console.error("RegionPage: Error loading enhanced data:",a);try{const o=await Pe.getPlansData(!0);console.log("RegionPage: Using fallback plans data:",o?.items?.length||0,"plans"),k(o)}catch(o){console.error("RegionPage: Fallback also failed:",o),k({items:[]})}}finally{Z(!1)}})()},[]);const N=typeof window>"u"||!window.document||!window.document.createElement,ae=!N&&Y&&$,F={items:[{identifier:"region_3gb_30days",name:"3 GB Plan",data_limit:{amount:3,unit:"GB",is_unlimited:!1},duration:{amount:30,unit:"day"},price:{amount_with_tax:999,currency:"USD",identifier:"region_3gb_30days"},covered_countries:[]},{identifier:"region_5gb_30days",name:"5 GB Plan",data_limit:{amount:5,unit:"GB",is_unlimited:!1},duration:{amount:30,unit:"day"},price:{amount_with_tax:1499,currency:"USD",identifier:"region_5gb_30days"},covered_countries:[]},{identifier:"region_10gb_30days",name:"10 GB Plan",data_limit:{amount:10,unit:"GB",is_unlimited:!1},duration:{amount:30,unit:"day"},price:{amount_with_tax:2499,currency:"USD",identifier:"region_10gb_30days"},covered_countries:[]}]},D=N||!w||!$?F:w,O=B.map(e=>e.id.toUpperCase()),S={europe:"EU",asia:"ASA","north-america":"NAM","south-america":"LAT",africa:"AFR",oceania:"ASA"}[n],P=j(()=>(D?.items||[]).filter(e=>{const a=Array.isArray(e.covered_countries)?e.covered_countries:[],o=a.length,u=a.filter(g=>O.includes(g)).length;return o<=1||o>=50||u<2?!1:(S&&e.region===S,!0)}),[D,O,S]);console.log("RegionPage: Filtering plans for region:",n),console.log("RegionPage: Total plans in data:",D?.items?.length||0),console.log("RegionPage: Filtered region plans:",P.length);const ne=P.filter(e=>e.region===S),re=P.filter(e=>e.region!==S);console.log("RegionPage: Explicit regional plans:",ne.length,"Country plans in region:",re.length);const A={};P.forEach(e=>{const a=Array.isArray(e.covered_countries)?e.covered_countries.length:0;if(a<=1||a>=50)return;const u=`regional|${e.region||"multi"}|${e.data_amount}-${e.data_unit}-${e.validity_days}|${e.price?.amount_with_tax}`,g=A[u];(!g||(e.price?.amount_with_tax??1/0)<(g.price?.amount_with_tax??1/0))&&(A[u]=e)});const T=Object.values(A),f=T.length>0?T.map(e=>{let a="country";return Array.isArray(e.covered_countries)&&e.covered_countries.length>=50?a="global":Array.isArray(e.covered_countries)&&e.covered_countries.length>1?a="regional":a="country",{id:e.identifier,name:e.name,data_amount:e.data_amount,data_unit:e.data_unit,validity_days:e.validity_days,price:{amount_with_tax:e.price.amount_with_tax,currency:e.price.currency},covered_countries:e.covered_countries,identifier:e.identifier,data:e.data,validity:e.validity,planType:a,region:e.region}}):N?F.items.map(e=>{let a="country";return e.region==="GLB"||e.covered_countries.length>=50?a="global":e.region||e.covered_countries.length>5?a="regional":a="country",{id:e.identifier,name:e.name,data_amount:e.data_amount,data_unit:e.data_unit,validity_days:e.validity_days,price:{amount_with_tax:e.price.amount_with_tax,currency:e.price.currency},covered_countries:e.covered_countries,identifier:e.identifier,data:e.data,validity:e.validity,planType:a,region:e.region}}):[],H=f.find(e=>e.isBestValue),ie=H?H.id.toString():void 0,I=f.length>0?f.reduce((e,a)=>a.price.amount_with_tax<e.price.amount_with_tax?a:e,f[0]):null,C=I?`${L(I.price.currency)}${I.price.amount_with_tax/100}`:null,V=ue.useMemo(()=>{if(!w?.items)return new Map;const e=new Map;try{w.items.forEach(a=>{const o=a.covered_countries||[],u=a.price.amount_with_tax;o.forEach(g=>{const y=g.toUpperCase(),R=e.get(y);(!R||u<R.amount)&&e.set(y,{amount:u,currency:a.price.currency})})})}catch(a){console.error("Error creating country prices map:",a)}return e},[w]),oe=j(()=>{const e=r,a=`${fe}${l.language==="en"?"/en":""}/${n}`,o=`${a}/#region`,u=`${a}/#breadcrumb`,g=`${a}/#product`,y=f.map(h=>h.price.amount_with_tax/100).filter(h=>Number.isFinite(h)),R=y.length?Math.min(...y).toFixed(2):void 0,ge=y.length?Math.max(...y).toFixed(2):void 0,U=f.slice(0,20).map(h=>({"@type":"Offer","@id":`${a}/#offer-${h.id}`,sku:h.id,name:h.name,price:(h.price.amount_with_tax/100).toFixed(2),priceCurrency:h.price.currency||"USD",availability:"https://schema.org/InStock",eligibleRegion:{"@id":o},itemOffered:{"@id":g},url:`${a}#plans`}));return{"@context":"https://schema.org","@graph":[pe(d,l.language),xe(d,l.language),ye(d,l.language,a,c("meta.title_template",{region:e})||`${e} eSIM - Travel eSIMple`,c("meta.description_template",{region:e})||`Get affordable eSIM data plans for ${e}. Instant activation, no hidden fees.`,o,u),be(d,l.language,a,[{name:d("breadcrumbs.home",{ns:"common"}),item:`${Ne}/`},{name:`${e} eSIM`,item:a}]),_e(d,l.language,a,e,"Place"),ve(d,l.language,a,`${e} eSIM`,c("meta.og_description_template",{region:e})||`Get affordable eSIM data plans for ${e}. Instant activation, no hidden fees.`,U),we(d,l.language,a,f[0]?.price?.currency||"USD",R||"0",ge||"0",U.length,U.map(h=>h["@id"]))]}},[n,r,f,l.language,c,d]),le=[C?s("data_plans_from",{price:C}):s("affordable_flexible_plans"),s("stay_connected_networks",{region:r}),s("compatible_smartphones")],se=[{label:s("region_travel_esim",{region:r}),url:l.language==="zh"?`/zh/${n}`:`/${n}`}];if(ae)return t("div",{className:"container mx-auto px-4 py-8",children:i("div",{className:"animate-pulse",children:[t("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),t("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),t("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})});if(!x)return i("div",{className:"container mx-auto px-4 py-8",children:[t("h1",{className:"text-2xl font-bold text-center",children:"404 - Region Not Found"}),t("p",{className:"text-center text-gray-600",children:"The region you are looking for does not exist."})]});const ce=e=>{if(!V.size)return null;try{const a=e.countryCode||e.id.toUpperCase();return V.get(a)}catch(a){return console.error(`Error getting price for country ${e.name}:`,a),null}},de=e=>{const a=ce(e);return a?`${L(a.currency)}${a.amount/100}`:null},me=()=>{if(typeof window<"u"&&typeof window.gtag=="function"&&window.gtag("event","buy_esim_click",{region:x.name,plan:p?.id,upsell:Q}),p){const e={country:x.name,flag:"/esim-data/flags/globe.svg",data:p.data,validity:p.validity,price:p.price.amount_with_tax/100,currency:L(p.price.currency||"USD"),identifier:p.identifier,priceIdentifier:p.price?.identifier},a=encodeURIComponent(JSON.stringify(e));m(`/checkout?plan=${a}`)}};return i("div",{children:[i($e,{children:[t("html",{lang:l.language==="bg"?"bg":"en"}),t("title",{children:c("meta.title_template",{region:r})||`${r} eSIM - Travel eSIMple`}),t("meta",{name:"description",content:c("meta.description_template",{region:r})||`Get affordable eSIM data plans for ${r}. Instant activation, no hidden fees. Stay connected while traveling in ${r}.`}),t("meta",{name:"keywords",content:c("meta.keywords_template",{region:r})||`${r} eSIM, ${r} travel eSIM, ${r} mobile data, ${r} international roaming`}),t("meta",{property:"og:title",content:c("meta.og_title_template",{region:r})||`${r} eSIM - Instant Activation, No Roaming Fees`}),t("meta",{property:"og:description",content:c("meta.og_description_template",{region:r})||`Get affordable eSIM data plans for ${r}. Instant activation, no hidden fees.`}),t("meta",{property:"og:type",content:"website"}),t("meta",{property:"og:url",content:`https://travelesim.bg${l.language==="en"?"/en":""}/${n}`}),t("meta",{property:"og:image",content:"https://travelesim.bg/esim-data/travelesim-logo.png"}),t("meta",{property:"og:locale",content:l.language==="bg"?"bg_BG":"en_US"}),t("meta",{property:"og:locale:alternate",content:l.language==="bg"?"en_US":"bg_BG"}),t("meta",{name:"twitter:card",content:"summary_large_image"}),t("meta",{name:"twitter:title",content:c("meta.twitter_title_template",{region:r})||`${r} eSIM - Instant Activation, No Roaming Fees`}),t("meta",{name:"twitter:description",content:c("meta.twitter_description_template",{region:r})||`Get affordable eSIM data plans for ${r}. Instant activation, no hidden fees.`}),t("link",{rel:"canonical",href:`https://travelesim.bg${l.language==="en"?"/en":""}/${n}`}),t("link",{rel:"alternate",hrefLang:"bg",href:`https://travelesim.bg/${n}`}),t("link",{rel:"alternate",hrefLang:"en",href:`https://travelesim.bg/en/${n}`}),t("link",{rel:"alternate",hrefLang:"x-default",href:`https://travelesim.bg/${n}`}),$&&!N&&t("script",{type:"application/ld+json",children:JSON.stringify(oe)})]}),i("div",{className:"bg-white",children:[t(Ce,{items:se,navigateTo:m}),t("div",{className:"w-full bg-black text-white py-8 md:py-16",children:t("div",{className:"w-full max-w-[90vw] mx-auto px-2 sm:px-4",children:i("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 lg:gap-16 items-center justify-center",children:[i("div",{className:"lg:col-span-1 flex flex-col justify-center text-left px-2 sm:px-4",children:[i("div",{className:"flex flex-col sm:flex-row items-start mb-6 gap-3 sm:gap-4 w-full",children:[t("span",{className:"inline-flex items-center justify-center",style:{width:56,height:56,borderRadius:"50%",overflow:"hidden",boxShadow:"0 0 0 4px rgba(100,100,150,0.5), 0 0 0 8px #23225a",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:t("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t("span",{className:"text-2xl font-bold text-white",children:x.name.charAt(0)})})}),t("h1",{className:"text-4xl md:text-6xl font-extrabold text-white text-left",children:s("esim_for_region",{region:r})})]}),t("p",{className:"text-base sm:text-lg md:text-xl text-gray-200 mb-6 sm:mb-8 text-left",children:s("stay_connected_region",{region:r})}),t("ul",{className:"space-y-2 mb-6 sm:mb-8 text-white text-left",children:le.map((e,a)=>t(Ee,{text:e},a))})]}),t("div",{className:"lg:col-span-1 flex flex-col justify-center",children:t("div",{className:"w-full rounded-none shadow-none p-0 m-0 border-0 sm:rounded-2xl sm:shadow-lg sm:p-8 flex flex-col justify-center items-center lg:sticky lg:top-24",style:{boxSizing:"border-box"},children:t(Me,{plans:f,selectedPlan:p,onSelectPlan:e=>K(e),countryName:r,bestValuePlanId:ie,onUpsellChange:X,onBuyNow:me,onCheckCompatibility:()=>M(!0)})})})]})})}),t(Be,{plans:f,regionName:r}),t("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:t(E,{fallback:i("div",{className:"animate-pulse p-4",children:[t("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),t("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),children:t(Ue,{regionName:x?.name||r,title:`All Available Plans for ${r}`,maxPlans:12,showSource:!0,className:"mb-8"})})}),t("div",{className:"bg-gray-50 py-16 md:py-24",children:t("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:i("div",{className:"max-w-6xl mx-auto",children:[i("div",{className:"text-center mb-16",children:[t("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:c("countries_section.title",{region:r})}),t("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:c("countries_section.description")})]}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8",children:B.map(e=>t(je,{country:e,navigateTo:m,price:de(e)||void 0},e.id))}),t("div",{className:"mt-16 pt-12 border-t border-gray-200",children:i("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[i("div",{children:[t("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:B.length}),t("div",{className:"text-gray-600 font-medium",children:s("countries_available")})]}),i("div",{children:[t("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:C?s("from_price",{price:C}):s("from_default_price")}),t("div",{className:"text-gray-600 font-medium",children:s("starting_price")})]}),i("div",{children:[t("div",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"24/7"}),t("div",{className:"text-gray-600 font-medium",children:s("customer_support")})]})]})})]})})}),t(Re,{regionName:r}),t(E,{fallback:t(J,{}),children:t(Ie,{onCheckCompatibility:()=>M(!0)})}),t(De,{isOpen:ee,onClose:()=>M(!1)}),t(E,{fallback:t(J,{}),children:t(Ae,{navigateTo:m})})]})]},`region-${n}-${N?"ssr":$?"hydrated":"client"}`)},je=({country:n,price:m})=>{const{t:d}=_("countries"),l=c=>{try{const v=d(`countries.${c}`,{ns:"countries"});return v!==`countries.${c}`?v:n.name}catch(v){return console.error("Translation error:",v),n.name}},s=m!=null;return t("a",{href:`/${n.regionId}/${n.slug}`,className:`group bg-white p-6 rounded-xl shadow-sm border border-gray-100 cursor-pointer hover:shadow-lg hover:border-blue-200 transition-all duration-300 transform hover:-translate-y-1 block ${s?"":"opacity-60"}`,children:i("div",{className:"flex items-center space-x-4",children:[t("div",{className:"flex-shrink-0",children:t("div",{className:"w-12 h-12 rounded-lg overflow-hidden shadow-sm border border-gray-200 group-hover:shadow-md transition-shadow duration-300",children:t("img",{src:`/esim-data/flags/${n.id.toLowerCase()}.svg`,alt:`${l(n.id)} flag`,className:"w-full h-full object-cover",loading:"lazy",width:"48",height:"48"})})}),i("div",{className:"flex-1 min-w-0",children:[t("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 truncate",children:l(n.id)}),t("p",{className:"text-sm text-gray-600 font-medium",children:s?m:d("no_plans_available")}),t("div",{className:"flex items-center mt-2",children:t("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:d(s?"available":"unavailable")})})]}),t("div",{className:"flex-shrink-0",children:t("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Ee=({text:n})=>i("li",{className:"flex items-center text-lg text-white",children:[t("svg",{className:"w-6 h-6 text-green-500 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),n]});export{q as N,Ye as R,Xe as a};
